<rally-name-header name="Take Action"></rally-name-header>


<ion-content> 
    <ion-card *ngFor="let objective of objectives, let i = index" style="position: relative;">

        <ion-fab right top>
            <button ion-fab color="light"><ion-icon name="ios-more"></ion-icon></button>
            <ion-fab-list side="left">
                <button ion-fab (click)="hideItem(objective.id, i)"><ion-icon name="md-done-all"></ion-icon></button>
              
            </ion-fab-list>
        </ion-fab>

       <ion-item>
            <ion-avatar item-start>
                <img src="{{objective.organization['image_url']}}" (click)="goToOrganizationProfile(objective.organization_id)">
            </ion-avatar>
            <button (click)="goToOrganizationProfile(objective.organization_id)" style="background: none;">
        <h2> <small>via</small> {{objective.organization['name']}}</h2>
    </button>
            <p><small>{{objective.created_at | amTimeAgo}}</small></p>
        </ion-item>

        <div (click)="goToActionPage(objective.id)" class="organization-bg"[ngStyle]="{ 'background-image' : 'url(' + objective.image_url +')'}">
            <!-- <div class="days-excerpt">
                <p class="white">{{objective?.goals[0]?.description}}</p>
            </div> -->
            <div class="railled-excerpt">
                <p class="white"><strong>{{objective.rallies}}</strong><br> Rallied</p>
            </div>
            <div class="bottom-excerpt">
                <p class="white">{{objective?.title}}</p>
            </div>
            <div class="btn-objectives-contact">
                    <button ion-button *ngIf="objective?.goals[0]?.goal_type !== 'sign'">Contact</button>
                    <button ion-button *ngIf="objective?.goals[0]?.goal_type === 'sign'">Sign</button>
                  </div>
        </div>


        <ion-card-content>
            <p>{{objective.description | truncate : 200 : '...'}}</p>
            <!-- <ion-row>
                <ion-col col-8>
                    <p class="link">{{objective.likes}} Likes, {{objective.shares}} Shares</p>
                </ion-col>
                <ion-col col-4>
                    <button ion-button color="dark" class="action-btn" (click)="goToActionPage(objective.id)">Take action</button>
                </ion-col>
            </ion-row> -->
        </ion-card-content>
        <ion-row>
            <!-- <ion-col class="token" col-8>
                <p>You've taken action on this 3 times</p>
            </ion-col>
            <ion-col col-4 class="token-btn">
                <button ion-button icon-left clear full style="height: 30px; font-weight: 600;
    font-size: 13px;" (click)="hideItem(objective.id, i)">
          I'M DONE
      </button>
            </ion-col> -->

        </ion-row>

        <ion-row>
            <button [disabled]="disable" class="btn-50 right-border" ion-button icon-left clear full (click)="getLikeStatus($event, objective?.goals[0]?.id, goalLike)" [ngStyle]="{'background-color': findInLoop(objective?.goals[0]?.user_likes)}">
                <ion-icon name="ios-heart" ></ion-icon>
                {{objective.likes}}
            </button>
            <button [disabled]="disable" class="btn-50" ion-button icon-left clear full (click)="shareController(objective.title, 'https://sjdsdirectoryapp.senorcoders.com/ufittapp/IMG_20170802_124650.jpg', objective?.goals[0]?.id, shareAction, $event)">
                    <ion-icon name="ios-share-alt"></ion-icon>
                    {{objective.shares}}
                </button>

        </ion-row>

    </ion-card>

</ion-content>

<!-- <ion-footer>
    <ion-toolbar style="min-height: auto; padding: 0;">
        <ion-row>
            <ion-col col-2 class="footer-icons">
                <button (click)="goToHome()">
                    <ion-icon name="ios-home"></ion-icon>
                </button>
            </ion-col>
            <ion-col col-6>
                <p class="white-footer" (click)="presentPopover()">Take Action</p>
            </ion-col>
            <ion-col col-2 class="footer-icons" style="border-right: 1px solid;">
                <button (click)="goToAlerts()">
                    <ion-icon name="ios-notifications"></ion-icon>
                </button>
            </ion-col>
            <ion-col class="footer-icons">
                <button (click)="goToProfile()">
                    <ion-icon name="ios-person"></ion-icon>
                </button>
            </ion-col>
        </ion-row>
    </ion-toolbar>
</ion-footer> -->